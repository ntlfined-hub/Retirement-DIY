<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>‡πÄ‡∏Å‡∏°‡∏ï‡∏∞‡∏•‡∏∏‡∏¢‡∏î‡πà‡∏≤‡∏ô ¬∑ ‡∏ß‡∏±‡∏î‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô (12 ‡∏î‡πà‡∏≤‡∏ô)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg-from:#f8fafc; --bg-to:#f1f5f9; --card:#ffffff; --ink:#0f172a; --muted:#64748b; --line:#e5e7eb;
      --primary:#111827; --accent:#6366f1; --success:#10b981; --warn:#f59e0b; --error:#ef4444;
    }
    *{ box-sizing:border-box }
    html,body{ height:100% }
    body{ font-family:'Inter',system-ui,-apple-system,'Segoe UI',sans-serif; color:var(--ink); background:linear-gradient(180deg,var(--bg-from),var(--bg-to)) }
    .card{ background:var(--card); border:1px solid var(--line); border-radius:1rem; box-shadow:0 6px 20px rgba(15,23,42,.06) }
    .choice{ border:1px solid var(--line); border-radius:1rem; padding:1rem 1.1rem; transition:.18s ease; cursor:pointer; user-select:none }
    .choice:hover{ transform:translateY(-1px); box-shadow:0 8px 18px rgba(15,23,42,.06) }
    .choice:active{ transform:translateY(0) scale(.99) }
    .pill{ border:1px solid var(--line); padding:.25rem .6rem; border-radius:999px; font-size:.8rem; color:var(--muted) }
    .progress{ height:10px; border-radius:999px; background:#e5e7eb; overflow:hidden }
    .progress > div{ height:100%; background:linear-gradient(90deg,var(--accent),#8b5cf6); width:0% }
    .btn{ display:inline-flex; align-items:center; justify-content:center; gap:.5rem; border-radius:.9rem; padding:.9rem 1.1rem; border:1px solid var(--line); background:#111827; color:#fff; transition:.18s }
    .btn:hover{ filter:brightness(1.05) }
    .btn-ghost{ background:#fff; color:var(--ink) }
    .btn-ghost:hover{ background:#f8fafc }
    .fade-enter{ animation:fadeIn .15s ease both }
    @keyframes fadeIn{ from{ opacity:.0; transform:translateY(4px) } to{ opacity:1; transform:translateY(0) } }
    .grid-cards{ display:grid; grid-template-columns:1fr; gap:.8rem }
    @media (min-width:480px){ .grid-cards{ grid-template-columns:1fr 1fr } }
    @media (min-width:920px){ .shell{ max-width:880px } }
  </style>
</head>
<body>
  <div class="min-h-screen flex items-center justify-center p-4">
    <div class="shell w-full">
      <header class="mb-4">
        <div class="flex items-center justify-between">
          <div class="text-sm text-slate-500 pill">‡πÄ‡∏Å‡∏°‡∏ï‡∏∞‡∏•‡∏∏‡∏¢‡∏î‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô ¬∑ 12 ‡∏î‡πà‡∏≤‡∏ô</div>
          <button id="btnReset" class="text-sm text-slate-500 hover:text-slate-700 underline">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</button>
        </div>
        <div class="mt-3 progress"><div id="bar" style="width:0%"></div></div>
        <div id="stepLabel" class="mt-2 text-sm text-slate-600">‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°</div>
      </header>

      <main id="stage" class="card p-4 md:p-6 fade-enter">
        <!-- ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏î‡πà‡∏≤‡∏ô‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÄ‡∏£‡∏ô‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏î‡πâ‡∏ß‡∏¢ JS -->
      </main>

      <footer class="mt-4 flex items-center justify-between">
        <button id="btnBack" class="btn btn-ghost" disabled>‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button>
        <div class="text-slate-400 text-sm">Fin-Ed / FIN-JOD ¬∑ Card Game Style</div>
      </footer>
    </div>
  </div>

  <script>
    /******************************************************************
     * GAME ENGINE ‚Äî Card Game Style (12 Steps + Branching)
     * ‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢, ‡∏†‡∏≤‡∏©‡∏≤‡∏á‡πà‡∏≤‡∏¢, ‡∏™‡∏£‡∏∏‡∏õ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏ö‡πÄ‡∏Å‡∏°‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
     ******************************************************************/
    const MAX_STEPS = 12;

    // ‡πÄ‡∏Å‡πá‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô
    const state = {
      step: 0,
      path: [],                   // ‡πÄ‡∏Å‡πá‡∏ö id ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ï‡∏≠‡∏ö‡πÅ‡∏•‡πâ‡∏ß
      answers: {},               // {id: key ‡∏Ç‡∏≠‡∏á option}
      visited: {                 // ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏ñ‡∏≤‡∏°‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏°‡∏¥‡∏ï‡∏¥
        income: false,  // ‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ
        expense: false, // ‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡πÉ‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô
        debt: false,    // ‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏´‡∏ô‡∏µ‡πâ / DTI
        saving: false,  // ‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô
        invest: false   // ‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∏‡∏ô
      },
      facts: { // ‡∏ï‡∏±‡∏ß‡∏ä‡∏µ‡πâ‡∏ß‡∏±‡∏î‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•
        feeling: null,           // ‡∏ï‡∏∂‡∏á/‡∏û‡∏≠‡∏≠‡∏¢‡∏π‡πà/‡πÄ‡∏´‡∏•‡∏∑‡∏≠
        causeTight: null,        // expense/debt/income
        expenseFocus: null,      // food/shopping/bills
        debtStatus: null,        // minpay/multi/highrate
        dtiBand: null,           // high/mid/ok
        monthEndLeft: null,      // none/some/steady
        emergencyMonths: null,   // 0, <1, 1-3, >3
        investLevel: null,       // none/some/serious
        saveRate: null,          // <10 / 10-20 / >20
        growPriority: null       // goal cluster
      }
    };

    // ‡∏¢‡∏π‡∏ó‡∏¥‡∏•
    const $ = sel => document.querySelector(sel);
    const stage = $("#stage");
    const bar = $("#bar");
    const stepLabel = $("#stepLabel");
    const btnBack = $("#btnBack");
    const btnReset = $("#btnReset");

    // ‡πÄ‡∏£‡∏ô‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
    function renderQuestion(q){
      state.step = Math.min(state.step+1, MAX_STEPS); // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏™‡∏î‡∏á
      updateProgress();

      stage.innerHTML = `
        <div class="flex items-center justify-between mb-2">
          <div class="text-xs text-slate-500">‡∏î‡πà‡∏≤‡∏ô ${state.step}/${MAX_STEPS}</div>
          <div class="pill">${q.tag}</div>
        </div>
        <h1 class="text-xl md:text-2xl font-semibold leading-snug">${q.text}</h1>
        ${q.sub ? `<p class="mt-2 text-slate-600">${q.sub}</p>`:''}
        <div class="mt-4 grid-cards" id="choices"></div>
      `;

      const wrap = $("#choices");
      q.options.forEach(opt=>{
        const div = document.createElement('button');
        div.className = "choice text-left";
        div.setAttribute('data-key', opt.key);
        div.innerHTML = `
          <div class="flex gap-3 items-start">
            <div class="text-2xl">${opt.icon || 'üü¶'}</div>
            <div>
              <div class="font-semibold">${opt.label}</div>
              ${opt.hint ? `<div class="text-sm text-slate-500 mt-1">${opt.hint}</div>`:''}
            </div>
          </div>
        `;
        div.addEventListener('click', ()=>{
          // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö
          state.answers[q.id] = opt.key;
          state.path.push(q.id);
          // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÅ‡∏ü‡πá‡∏Å‡∏ï‡πå/‡∏°‡∏¥‡∏ï‡∏¥
          if(q.affect) q.affect(opt.key, state);
          // ‡πÑ‡∏õ‡∏î‡πà‡∏≤‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
          nextFrom(opt, q);
        });
        wrap.appendChild(div);
      });

      // ‡∏õ‡∏∏‡πà‡∏°‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö
      btnBack.disabled = state.path.length===0;
    }

    // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
    function nextFrom(opt, q){
      // ‡∏ñ‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏î‡πà‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß ‚Üí ‡∏ï‡∏£‡∏ß‡∏à‡∏°‡∏¥‡∏ï‡∏¥‡∏Ç‡∏≤‡∏î
      if(state.step >= MAX_STEPS){
        const missing = missingDimensions();
        if(missing.length){
          // ‡∏î‡∏∂‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡∏°‡∏¥‡∏ï‡∏¥‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏≤‡∏° (‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏î‡πà‡∏≤‡∏ô‡∏ï‡πà‡∏≠‡∏°‡∏¥‡∏ï‡∏¥)
          const forceQ = mandatoryQuestionFor(missing[0]);
          // ‡∏£‡∏µ‡∏î‡∏±‡∏Å‡∏ã‡πå step ‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡πÄ‡∏Å‡∏¥‡∏ô 12: ‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞ +step ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÄ‡∏£‡∏ô‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ó‡∏±‡∏ö step ‡πÄ‡∏î‡∏¥‡∏°
          state.step = MAX_STEPS - 1; // ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ renderQuestion ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏õ‡πá‡∏ô 12 ‡∏û‡∏≠‡∏î‡∏µ
          return renderQuestion(forceQ);
        }
        return renderSummary();
      }

      // ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å node ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ‡πÅ‡∏ö‡∏ö‡πÅ‡∏ï‡∏Å‡∏Å‡∏¥‡πà‡∏á
      if(typeof opt.next === 'function'){
        const node = opt.next(state);
        return renderQuestion(node);
      }else if(opt.next){
        return renderQuestion(opt.next);
      }else{
        // ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ next ‡πÉ‡∏´‡πâ‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡πÇ‡∏´‡∏ô‡∏î‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞‡∏ó‡∏µ‡πà‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏°‡∏¥‡∏ï‡∏¥
        const auto = smartRoute();
        return renderQuestion(auto);
      }
    }

    // ‡∏ï‡∏£‡∏ß‡∏à‡∏ß‡πà‡∏≤‡∏°‡∏¥‡∏ï‡∏¥‡πÑ‡∏´‡∏ô‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ñ‡∏≤‡∏°
    function missingDimensions(){
      const miss = [];
      for(const k of Object.keys(state.visited)){
        if(!state.visited[k]) miss.push(k);
      }
      return miss;
    }

    // ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡πÅ‡∏•‡∏∞‡πÅ‡∏ú‡∏ô 90 ‡∏ß‡∏±‡∏ô
    function renderSummary(){
      // ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏¢‡πà‡∏≠‡∏à‡∏≤‡∏Å facts
      const f = state.facts;

      // ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏ä‡∏¥‡∏á‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏á‡πà‡∏≤‡∏¢ ‡πÜ
      let score = 0;
      // ‡∏™‡∏†‡∏≤‡∏û‡∏Ñ‡∏•‡πà‡∏≠‡∏á
      if(f.monthEndLeft==='steady') score+=3; else if(f.monthEndLeft==='some') score+=1;
      // ‡∏≠‡∏≠‡∏°‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô
      if(f.emergencyMonths==='>3') score+=3; else if(f.emergencyMonths==='1-3') score+=2; else if(f.emergencyMonths==='<1') score+=0; else score+=0;
      // DTI
      if(f.dtiBand==='ok') score+=3; else if(f.dtiBand==='mid') score+=1; else score+=0;
      // ‡∏•‡∏á‡∏ó‡∏∏‡∏ô
      if(f.investLevel==='serious') score+=3; else if(f.investLevel==='some') score+=2;
      // ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏≠‡∏≠‡∏°
      if(f.saveRate==='>20') score+=3; else if(f.saveRate==='10-20') score+=2;

      let ending = 'Balancer ‚öñÔ∏è';
      if(score>=10) ending = 'Accelerator üöÄ';
      else if(score<=4) ending = 'Rescue Needed üÜò';
      else if(score<=7) ending = 'Survivor üí™';

      // ‡πÅ‡∏ú‡∏ô 90 ‡∏ß‡∏±‡∏ô‡πÅ‡∏ö‡∏ö‡∏™‡πà‡∏ß‡∏ô‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏• (‡∏¢‡∏∂‡∏î facts)
      const plan = [];
      // ‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢
      if(state.visited.expense){
        plan.push({
          title:"‡∏•‡∏î‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡πÉ‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô (‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå 1‚Äì4)",
          items:[
            "‡∏ï‡∏±‡πâ‡∏á‡∏á‡∏ö‡∏£‡∏≤‡∏¢‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå (‡∏≠‡∏≤‡∏´‡∏≤‡∏£/‡∏ä‡πâ‡∏≠‡∏õ/‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á) ‡πÅ‡∏•‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏à‡πà‡∏≤‡∏¢",
            "‡∏ï‡∏±‡∏î‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ü‡∏∏‡πà‡∏°‡πÄ‡∏ü‡∏∑‡∏≠‡∏¢ 2 ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏´‡∏ô‡∏±‡∏Å‡∏™‡∏∏‡∏î 30 ‡∏ß‡∏±‡∏ô",
            "‡∏ï‡πà‡∏≠‡∏£‡∏≠‡∏á/‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏û‡πá‡∏Å‡πÄ‡∏Å‡∏à‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏Ñ‡∏á‡∏ó‡∏µ‡πà (‡πÄ‡∏ô‡πá‡∏ï/‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠/‡∏™‡∏ï‡∏£‡∏µ‡∏°‡∏°‡∏¥‡πà‡∏á)"
          ],
          tag:"expense"
        });
      }
      // ‡∏´‡∏ô‡∏µ‡πâ / DTI
      if(state.visited.debt){
        if(f.dtiBand==='high'){
          plan.push({
            title:"‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏î‡πà‡∏ß‡∏ô: ‡∏•‡∏î DTI ‡πÉ‡∏´‡πâ‡∏ï‡πà‡∏≥‡∏Å‡∏ß‡πà‡∏≤ 50% (‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå 1‚Äì6)",
            items:[
              "‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡πà‡∏≤‡∏á‡∏ß‡∏î‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏´‡∏ô‡∏µ‡πâ‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡∏Å‡πà‡∏≠‡∏ô (Snowball/ Avalanche)",
              "‡∏Ñ‡∏∏‡∏¢‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡∏µ‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏∑‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡∏ú‡πà‡∏≠‡∏ô/‡∏£‡∏ß‡∏°‡∏¢‡∏≠‡∏î‡∏î‡∏≠‡∏Å‡∏ï‡πà‡∏≥",
              "‡∏£‡∏∞‡∏á‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏≠‡∏¢‡∏≤‡∏Å‡πÑ‡∏î‡πâ 45‚Äì60 ‡∏ß‡∏±‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ‡∏à‡πà‡∏≤‡∏¢‡∏´‡∏ô‡∏µ‡πâ"
            ],
            tag:"debt"
          });
        }else{
          plan.push({
            title:"‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏´‡∏ô‡∏µ‡πâ‡πÄ‡∏ö‡∏≤‡∏•‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á (‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå 1‚Äì8)",
            items:[
              "‡∏Å‡∏±‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏à‡πà‡∏≤‡∏¢‡∏´‡∏ô‡∏µ‡πâ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏≠‡∏≠‡∏Å‡∏ó‡∏±‡∏ô‡∏ó‡∏µ (Auto)",
              "‡∏£‡∏µ‡πÑ‡∏ü‡πÅ‡∏ô‡∏ô‡∏ã‡πå/‡∏õ‡∏£‡∏±‡∏ö‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡∏ô‡∏µ‡πâ‡∏ñ‡πâ‡∏≤‡∏î‡∏≠‡∏Å‡∏™‡∏π‡∏á‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥",
              "‡∏´‡πâ‡∏≤‡∏°‡∏à‡πà‡∏≤‡∏¢‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥‡∏¢‡∏≤‡∏ß ‡πÜ ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô"
            ],
            tag:"debt"
          });
        }
      }
      // ‡∏≠‡∏≠‡∏°‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô
      if(state.visited.saving){
        if(f.emergencyMonths==='0' || f.emergencyMonths==='<1'){
          plan.push({
            title:"‡∏õ‡∏±‡πâ‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô 1‚Äì3 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô (‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå 1‚Äì12)",
            items:[
              "‡πÅ‡∏¢‡∏Å‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÄ‡∏á‡∏¥‡∏ô‡∏Å‡∏±‡∏ô‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô‡∏ï‡πà‡∏≤‡∏á‡∏´‡∏≤‡∏Å",
              "‡∏ï‡∏±‡πâ‡∏á‡∏´‡∏±‡∏Å‡∏≠‡∏≠‡∏°‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏ß‡∏±‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏≠‡∏≠‡∏Å (‡πÄ‡∏£‡∏¥‡πà‡∏° 10%)",
              "‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß/‡∏•‡∏î‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏ï‡∏¥‡∏°‡∏Å‡∏±‡∏ô‡∏ä‡∏ô‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö"
            ],
            tag:"saving"
          });
        }else{
          plan.push({
            title:"‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏Å‡∏±‡∏ô‡∏ä‡∏ô‡πÉ‡∏´‡πâ‡∏ñ‡∏∂‡∏á 3‚Äì6 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô (‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå 1‚Äì12)",
            items:[
              "‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏≠‡∏≠‡∏°‡∏≠‡∏µ‡∏Å +5% ‡∏Ç‡∏≠‡∏á‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ",
              "‡πÇ‡∏ö‡∏ô‡∏±‡∏™/‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏û‡∏¥‡πÄ‡∏®‡∏© ‡πÉ‡∏´‡πâ‡∏•‡∏á‡∏ó‡∏µ‡πà‡∏Å‡∏±‡∏ô‡∏ä‡∏ô 50% ‡∏Å‡πà‡∏≠‡∏ô",
              "‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ñ‡∏∂‡∏á‡πÄ‡∏õ‡πâ‡∏≤ ‡∏Ñ‡πà‡∏≠‡∏¢‡∏Ç‡∏¢‡∏±‡∏ö‡πÑ‡∏õ‡πÅ‡∏ú‡∏ô‡∏•‡∏á‡∏ó‡∏∏‡∏ô"
            ],
            tag:"saving"
          });
        }
      }
      // ‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ
      if(state.visited.income){
        plan.push({
          title:"‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡πÉ‡∏´‡πâ‡∏™‡∏°‡∏î‡∏∏‡∏• (‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå 2‚Äì10)",
          items:[
            "‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô‡∏ó‡∏±‡∏Å‡∏©‡∏∞‡∏ó‡∏µ‡πà‡∏Ç‡∏≤‡∏¢‡πÑ‡∏î‡πâ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å 1 ‡∏á‡∏≤‡∏ô‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á",
            "‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡πÄ‡∏™‡∏£‡∏¥‡∏°/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô ‡πÅ‡∏•‡∏∞‡∏ß‡∏±‡∏î‡∏ú‡∏•‡∏ó‡∏∏‡∏Å‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå",
            "‡∏ñ‡πâ‡∏≤‡∏ß‡πà‡∏≤‡∏á‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏Å: ‡∏Ç‡∏≠‡∏Ç‡∏¢‡∏≤‡∏¢‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó/‡∏Ñ‡∏≠‡∏°‡∏°‡∏¥‡∏ä‡∏ä‡∏±‡πà‡∏ô/‡∏õ‡∏£‡∏±‡∏ö‡∏ú‡∏•‡∏ï‡∏≠‡∏ö‡πÅ‡∏ó‡∏ô"
          ],
          tag:"income"
        });
      }
      // ‡∏•‡∏á‡∏ó‡∏∏‡∏ô
      if(state.visited.invest){
        if(f.investLevel==='none'){
          plan.push({
            title:"‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏•‡∏á‡∏ó‡∏∏‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ (‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå 4‚Äì12)",
            items:[
              "‡πÄ‡∏£‡∏¥‡πà‡∏° DCA ‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ï‡πà‡∏≥‚Äì‡∏Å‡∏•‡∏≤‡∏á",
              "‡∏Ñ‡∏á‡∏ß‡∏¥‡∏ô‡∏±‡∏¢‡∏•‡∏á‡∏ó‡∏∏‡∏ô‡πÅ‡∏°‡πâ‡∏ï‡∏•‡∏≤‡∏î‡∏ú‡∏±‡∏ô‡∏ú‡∏ß‡∏ô",
              "‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏±‡∏ô‡∏ä‡∏ô‡∏Ñ‡∏£‡∏ö‡πÅ‡∏•‡∏∞‡∏´‡∏ô‡∏µ‡πâ‡∏ô‡∏¥‡πà‡∏á ‡∏Ñ‡πà‡∏≠‡∏¢‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á"
            ],
            tag:"invest"
          });
        }else{
          plan.push({
            title:"‡∏à‡∏±‡∏î‡∏û‡∏≠‡∏£‡πå‡∏ï‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á (‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå 4‚Äì12)",
            items:[
              "‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡∏û‡∏≠‡∏£‡πå‡∏ï: ‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ï‡πà‡∏≥/‡∏Å‡∏•‡∏≤‡∏á/‡∏™‡∏π‡∏á ‡πÉ‡∏´‡πâ‡∏™‡∏≠‡∏î‡∏Ñ‡∏•‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢",
              "‡∏•‡∏á‡∏ó‡∏∏‡∏ô‡πÅ‡∏ö‡∏ö‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠ (DCA) ‡πÅ‡∏•‡∏∞‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô‡∏ó‡∏∏‡∏Å‡πÑ‡∏ï‡∏£‡∏°‡∏≤‡∏™",
              "‡∏≠‡∏¢‡πà‡∏≤‡∏ó‡∏∏‡πà‡∏°‡∏û‡∏≠‡∏£‡πå‡∏ï‡πÉ‡∏ô‡∏™‡∏¥‡∏ô‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡πÄ‡∏î‡∏µ‡∏¢‡∏ß"
            ],
            tag:"invest"
          });
        }
      }

      // ‡πÄ‡∏£‡∏ô‡πÄ‡∏î‡∏≠‡∏£‡πå
      const chips = [];
      if(state.visited.expense) chips.push(`<span class="pill">‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</span>`);
      if(state.visited.income) chips.push(`<span class="pill">‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ</span>`);
      if(state.visited.debt) chips.push(`<span class="pill">‡∏´‡∏ô‡∏µ‡πâ & DTI</span>`);
      if(state.visited.saving) chips.push(`<span class="pill">‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô</span>`);
      if(state.visited.invest) chips.push(`<span class="pill">‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∏‡∏ô</span>`);

      stage.innerHTML = `
        <div class="mb-2 flex items-center justify-between">
          <div class="text-xs text-slate-500">‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ñ‡∏∏‡∏ì</div>
          <div class="flex flex-wrap gap-2">${chips.join('')}</div>
        </div>
        <h2 class="text-2xl font-bold mb-2">‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì: <span class="text-indigo-600">${ending}</span></h2>
        <p class="text-slate-600 mb-4">
          ‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡∏™‡∏£‡∏∏‡∏õ‡∏à‡∏≤‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î 12 ‡∏î‡πà‡∏≤‡∏ô ‡πÇ‡∏î‡∏¢‡∏Ñ‡∏≥‡∏ô‡∏∂‡∏á‡∏ñ‡∏∂‡∏á
          ‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡πÉ‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô, ‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏´‡∏ô‡∏µ‡πâ (DTI), ‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô, ‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∏‡∏ô
        </p>
        <div class="grid gap-3">
          ${plan.map(p => `
            <div class="card p-4">
              <div class="text-sm text-slate-500 mb-1">${tagLabel(p.tag)}</div>
              <div class="font-semibold mb-2">${p.title}</div>
              <ul class="list-disc pl-5 text-slate-700 space-y-1">
                ${p.items.map(i=>`<li>${i}</li>`).join('')}
              </ul>
            </div>
          `).join('')}
        </div>

        <div class="mt-6 flex flex-wrap gap-2">
          <button class="btn" id="btnRestart">‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</button>
          <button class="btn btn-ghost" id="btnExport">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏£‡∏∏‡∏õ‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°</button>
        </div>
      `;

      $("#btnRestart")?.addEventListener('click', resetGame);
      $("#btnExport")?.addEventListener('click', () => {
        const txt = exportSummaryText(ending, plan);
        downloadText(`summary-fin-game.txt`, txt);
      });

      // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÅ‡∏ñ‡∏ö
      state.step = MAX_STEPS;
      updateProgress();
      btnBack.disabled = false;
    }

    function tagLabel(t){
      switch(t){
        case 'expense': return '‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡πÉ‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô';
        case 'debt': return '‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏´‡∏ô‡∏µ‡πâ / DTI';
        case 'saving': return '‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô';
        case 'income': return '‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ';
        case 'invest': return '‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∏‡∏ô';
        default: return '';
      }
    }

    function exportSummaryText(ending, plan){
      let s = `‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡πÄ‡∏Å‡∏°‡∏ï‡∏∞‡∏•‡∏∏‡∏¢‡∏î‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô (12 ‡∏î‡πà‡∏≤‡∏ô)\n`;
      s += `‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°: ${ending}\n\n`;
      plan.forEach((p,i)=>{
        s += `${i+1}. [${tagLabel(p.tag)}] ${p.title}\n`;
        p.items.forEach(it=> s += `   - ${it}\n`);
        s += `\n`;
      });
      return s;
    }

    function downloadText(filename, content){
      const blob = new Blob([content], {type:'text/plain;charset=utf-8'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = filename; a.click();
      URL.revokeObjectURL(url);
    }

    function updateProgress(){
      const pct = Math.max(0, Math.min(100, Math.round((state.step / MAX_STEPS)*100)));
      bar.style.width = pct + '%';
      stepLabel.textContent = state.step === 0 ? '‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°' : `‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° ¬∑ ‡∏î‡πà‡∏≤‡∏ô ${state.step}/${MAX_STEPS}`;
    }

    // ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏°‡∏¥‡∏ï‡∏¥
    function smartRoute(){
      // ‡∏•‡∏≠‡∏á‡∏™‡πà‡∏á‡πÑ‡∏õ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏°‡∏¥‡∏ï‡∏¥‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Ñ‡∏¢‡∏ñ‡∏≤‡∏°
      const miss = missingDimensions();
      if(miss.length){
        return mandatoryQuestionFor(miss[0]);
      }
      // ‡∏™‡∏≥‡∏£‡∏≠‡∏á: ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£‡∏Ç‡∏≤‡∏î ‡πÉ‡∏´‡πâ‡∏ñ‡∏≤‡∏°‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢/‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß ‡πÅ‡∏•‡πâ‡∏ß‡∏õ‡∏¥‡∏î‡πÄ‡∏Å‡∏°
      return Q.goalSpeed;
    }

    // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡∏ï‡∏≤‡∏°‡∏°‡∏¥‡∏ï‡∏¥
    function mandatoryQuestionFor(dim){
      switch(dim){
        case 'income': return Q.incomeHow;
        case 'expense': return Q.expenseCategory;
        case 'debt': return Q.debtDTI;
        case 'saving': return Q.emergencyFund;
        case 'invest': return Q.investLevel;
        default: return Q.goalSpeed;
      }
    }

    /**********************
     * ‡∏Ñ‡∏•‡∏±‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° (Nodes)
     **********************/
    const Q = {
      // ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°
      welcome: {
        id:'welcome',
        tag:'‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°',
        text:'‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏î‡∏π‡∏°‡∏±‡πâ‡∏¢‡∏ß‡πà‡∏≤ ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏á‡∏¥‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏£‡∏á‡πÅ‡∏Ñ‡πà‡πÑ‡∏´‡∏ô?',
        sub:'‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤ 3‚Äì5 ‡∏ô‡∏≤‡∏ó‡∏µ ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ñ‡∏π‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡∏ú‡∏¥‡∏î ¬∑ ‡∏à‡∏∞‡∏°‡∏µ‡∏™‡∏£‡∏∏‡∏õ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ñ‡∏∏‡∏ì‡∏´‡∏•‡∏±‡∏á‡∏à‡∏ö‡πÄ‡∏Å‡∏°',
        options:[
          { key:'go', label:'‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡∏¢', icon:'‚ñ∂Ô∏è', next: ()=> Q.feel1 }
        ],
        affect: null
      },

      // ‡∏î‡πà‡∏≤‡∏ô 1: ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏ï‡πà‡∏≠‡πÄ‡∏á‡∏¥‡∏ô
      feel1:{
        id:'feel1',
        tag:'‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°',
        text:'‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∏‡∏ì‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏¢‡∏±‡∏á‡πÑ‡∏á‡∏Å‡∏±‡∏ö‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡πÉ‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏à‡∏£‡∏¥‡∏á?',
        options:[
          { key:'tight', label:'‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡∏∂‡∏á ‡πÄ‡∏Ñ‡∏£‡∏µ‡∏¢‡∏î‡∏ö‡πà‡∏≠‡∏¢', icon:'üò£',
            affect:(k,s)=>{ s.facts.feeling='tight'; },
            next: ()=> Q.tightCause // ‡πÄ‡∏™‡πâ‡∏ô A
          },
          { key:'ok', label:'‡∏û‡∏≠‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏î‡πâ ‡πÅ‡∏ï‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏ä‡∏±‡∏î', icon:'üôÇ',
            affect:(k,s)=>{ s.facts.feeling='ok'; },
            next: ()=> Q.midWhy    // ‡πÄ‡∏™‡πâ‡∏ô B
          },
          { key:'surplus', label:'‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏∏‡∏Å‡πÄ‡∏î‡∏∑‡∏≠‡∏ô', icon:'üòé',
            affect:(k,s)=>{ s.facts.feeling='surplus'; s.facts.monthEndLeft='steady'; },
            next: ()=> Q.leftoverUse // ‡πÄ‡∏™‡πâ‡∏ô C
          }
        ]
      },

      /************ ‡πÄ‡∏™‡πâ‡∏ô A: ‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡∏∂‡∏á ************/
      tightCause:{
        id:'tightCause',
        tag:'‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏',
        text:'‡∏≠‡∏∞‡πÑ‡∏£‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡∏∂‡∏á‡∏ö‡πà‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î?',
        options:[
          { key:'expense', label:'‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡πÉ‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô‡πÄ‡∏¢‡∏≠‡∏∞', icon:'üõí',
            affect:(k,s)=>{ s.facts.causeTight='expense'; s.visited.expense=true; },
            next: ()=> Q.expenseCategoryA
          },
          { key:'debt', label:'‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏´‡∏ô‡∏µ‡πâ‡πÄ‡∏¢‡∏≠‡∏∞', icon:'üí≥',
            affect:(k,s)=>{ s.facts.causeTight='debt'; s.visited.debt=true; },
            next: ()=> Q.debtStatus
          },
          { key:'income', label:'‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏û‡∏≠', icon:'üíº',
            affect:(k,s)=>{ s.facts.causeTight='income'; s.visited.income=true; },
            next: ()=> Q.incomeHow
          }
        ]
      },

      expenseCategoryA:{
        id:'expenseCategoryA',
        tag:'‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô',
        text:'‡∏™‡πà‡∏ß‡∏ô‡πÉ‡∏´‡∏ç‡πà‡πÉ‡∏ä‡πâ‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏õ‡∏Å‡∏±‡∏ö‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÑ‡∏´‡∏ô?',
        options:[
          { key:'food', label:'‡∏≠‡∏≤‡∏´‡∏≤‡∏£ / ‡πÄ‡∏î‡∏•‡∏¥‡πÄ‡∏ß‡∏≠‡∏£‡∏µ', icon:'üçî',
            affect:(k,s)=>{ s.facts.expenseFocus='food'; s.visited.expense=true; },
            next: ()=> Q.monthEnd
          },
          { key:'shopping', label:'‡∏Ç‡∏≠‡∏á‡πÉ‡∏ä‡πâ / ‡∏Ç‡∏≠‡∏á‡∏≠‡∏¢‡∏≤‡∏Å‡πÑ‡∏î‡πâ', icon:'üõçÔ∏è',
            affect:(k,s)=>{ s.facts.expenseFocus='shopping'; s.visited.expense=true; },
            next: ()=> Q.monthEnd
          },
          { key:'bills', label:'‡∏Ñ‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á / ‡∏Ñ‡πà‡∏≤‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏π‡∏õ‡πÇ‡∏†‡∏Ñ', icon:'üöù',
            affect:(k,s)=>{ s.facts.expenseFocus='bills'; s.visited.expense=true; },
            next: ()=> Q.monthEnd
          }
        ]
      },

      debtStatus:{
        id:'debtStatus',
        tag:'‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏´‡∏ô‡∏µ‡πâ',
        text:'‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏´‡∏ô‡∏µ‡πâ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ö‡∏ö‡πÑ‡∏´‡∏ô‡∏°‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î?',
        options:[
          { key:'minpay', label:'‡∏à‡πà‡∏≤‡∏¢‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥‡∏ö‡πà‡∏≠‡∏¢ ‡πÜ', icon:'üßæ',
            affect:(k,s)=>{ s.facts.debtStatus='minpay'; s.visited.debt=true; },
            next: ()=> Q.debtDTI
          },
          { key:'multi', label:'‡∏ú‡πà‡∏≠‡∏ô‡∏´‡∏•‡∏≤‡∏¢‡∏Å‡πâ‡∏≠‡∏ô‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô', icon:'üß©',
            affect:(k,s)=>{ s.facts.debtStatus='multi'; s.visited.debt=true; },
            next: ()=> Q.debtDTI
          },
          { key:'highrate', label:'‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏™‡∏π‡∏á‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥', icon:'üìà',
            affect:(k,s)=>{ s.facts.debtStatus='highrate'; s.visited.debt=true; },
            next: ()=> Q.debtDTI
          }
        ]
      },

      incomeHow:{
        id:'incomeHow',
        tag:'‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ',
        text:'‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ö‡∏ö‡πÑ‡∏´‡∏ô?',
        options:[
          { key:'low', label:'‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å‡∏á‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏Å‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏û‡∏≠', icon:'üíº',
            affect:(k,s)=>{ s.visited.income=true; },
            next: ()=> Q.addIncome
          },
          { key:'noSide', label:'‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡πÄ‡∏™‡∏£‡∏¥‡∏°', icon:'üß∞',
            affect:(k,s)=>{ s.visited.income=true; },
            next: ()=> Q.addIncome
          },
          { key:'unstable', label:'‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡πÑ‡∏°‡πà‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠', icon:'üåä',
            affect:(k,s)=>{ s.visited.income=true; },
            next: ()=> Q.addIncome
          }
        ]
      },

      addIncome:{
        id:'addIncome',
        tag:'‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ',
        text:'‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ?',
        options:[
          { key:'side', label:'‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏á‡πà‡∏≤‡∏¢ ‡πÜ ‡∏Å‡πà‡∏≠‡∏ô', icon:'üõ†Ô∏è',
            affect:(k,s)=>{ s.visited.income=true; },
            next: ()=> Q.monthEnd
          },
          { key:'sell', label:'‡∏Ç‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á/‡∏ó‡∏±‡∏Å‡∏©‡∏∞‡∏ó‡∏µ‡πà‡∏°‡∏µ', icon:'üè∑Ô∏è',
            affect:(k,s)=>{ s.visited.income=true; },
            next: ()=> Q.monthEnd
          },
          { key:'scale', label:'‡∏Ç‡∏¢‡∏≤‡∏¢‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó‡∏á‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏Å', icon:'üìà',
            affect:(k,s)=>{ s.visited.income=true; },
            next: ()=> Q.monthEnd
          }
        ]
      },

      /************ ‡πÄ‡∏™‡πâ‡∏ô B: ‡∏û‡∏≠‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏î‡πâ‡πÅ‡∏ï‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ô‡∏¥‡πà‡∏á ************/
      midWhy:{
        id:'midWhy',
        tag:'‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡∏¥‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏á‡∏¥‡∏ô',
        text:'‡∏õ‡∏•‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏™‡πà‡∏ß‡∏ô‡πÉ‡∏´‡∏ç‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏¢‡∏±‡∏á‡πÑ‡∏á?',
        options:[
          { key:'little', label:'‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏ô‡∏¥‡∏î‡πÄ‡∏î‡∏µ‡∏¢‡∏ß', icon:'üü°',
            affect:(k,s)=>{ s.facts.monthEndLeft='some'; },
            next: ()=> Q.midBranch
          },
          { key:'someMonthShort', label:'‡∏ö‡∏≤‡∏á‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡πÑ‡∏°‡πà‡∏û‡∏≠', icon:'üü•',
            affect:(k,s)=>{ s.facts.monthEndLeft='none'; },
            next: ()=> Q.tightCause // ‡∏û‡∏≤‡πÑ‡∏õ‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏™‡πâ‡∏ô A
          }
        ]
      },

      midBranch:{
        id:'midBranch',
        tag:'‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•',
        text:'‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏á‡∏¥‡∏ô ‡∏°‡∏±‡∏Å‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏≠‡∏∞‡πÑ‡∏£?',
        options:[
          { key:'bonus', label:'‡πÑ‡∏î‡πâ‡πÄ‡∏á‡∏¥‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©/‡πÇ‡∏ö‡∏ô‡∏±‡∏™', icon:'üéÅ',
            affect:(k,s)=>{},
            next: ()=> Q.allocateBonus
          },
          { key:'spendLess', label:'‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏ô‡πâ‡∏≠‡∏¢‡∏•‡∏á', icon:'üßÆ',
            affect:(k,s)=>{ s.visited.expense=true; },
            next: ()=> Q.expenseCategory
          },
          { key:'unknown', label:'‡πÑ‡∏°‡πà‡πÅ‡∏ô‡πà‡πÉ‡∏à ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏´‡∏≤‡∏¢‡πÄ‡∏≠‡∏á', icon:'üïµÔ∏è',
            affect:(k,s)=>{ s.visited.expense=true; },
            next: ()=> Q.expenseCategory
          }
        ]
      },

      allocateBonus:{
        id:'allocateBonus',
        tag:'‡∏à‡∏±‡∏î‡∏™‡∏£‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©',
        text:'‡∏ñ‡πâ‡∏≤‡πÑ‡∏î‡πâ‡πÇ‡∏ö‡∏ô‡∏±‡∏™ ‡πÄ‡∏á‡∏¥‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏≠‡∏¢‡∏≤‡∏Å‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£‡∏Å‡πà‡∏≠‡∏ô?',
        options:[
          { key:'emg', label:'‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô', icon:'üõü',
            affect:(k,s)=>{ s.visited.saving=true; },
            next: ()=> Q.emergencyFund
          },
        { key:'debt', label:'‡πÇ‡∏õ‡∏∞‡∏´‡∏ô‡∏µ‡πâ‡πÉ‡∏´‡πâ‡πÄ‡∏ö‡∏≤‡∏•‡∏á', icon:'üîª',
            affect:(k,s)=>{ s.visited.debt=true; },
            next: ()=> Q.debtDTI
          },
          { key:'grow', label:'‡πÉ‡∏´‡πâ‡πÄ‡∏á‡∏¥‡∏ô‡∏á‡∏≠‡∏Å‡πÄ‡∏á‡∏¢', icon:'üå±',
            affect:(k,s)=>{ s.visited.invest=true; },
            next: ()=> Q.investLevel
          }
        ]
      },

      /************ ‡πÄ‡∏™‡πâ‡∏ô C: ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏á‡∏¥‡∏ô‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÇ‡∏ï ************/
      leftoverUse:{
        id:'leftoverUse',
        tag:'‡πÉ‡∏ä‡πâ‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠',
        text:'‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏≠‡∏≤‡πÑ‡∏õ‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£‡∏ö‡πâ‡∏≤‡∏á?',
        options:[
          { key:'saveOnly', label:'‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏ß‡πâ‡πÄ‡∏â‡∏¢ ‡πÜ', icon:'üíæ',
            affect:(k,s)=>{ s.facts.investLevel='none'; s.visited.saving=true; },
            next: ()=> Q.emergencyFund
          },
          { key:'saveInvest', label:'‡∏≠‡∏≠‡∏° + ‡∏•‡∏á‡∏ó‡∏∏‡∏ô‡∏ö‡πâ‡∏≤‡∏á', icon:'üì¶',
            affect:(k,s)=>{ s.facts.investLevel='some'; s.visited.invest=true; },
            next: ()=> Q.investLevel
          },
          { key:'seriousInvest', label:'‡∏•‡∏á‡∏ó‡∏∏‡∏ô‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏±‡∏á‡πÅ‡∏•‡πâ‡∏ß', icon:'üöÄ',
            affect:(k,s)=>{ s.facts.investLevel='serious'; s.visited.invest=true; },
            next: ()=> Q.portGoal
          }
        ]
      },

      /************ ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏£‡πà‡∏ß‡∏° (‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡πÄ‡∏™‡πâ‡∏ô) ************/
      monthEnd:{
        id:'monthEnd',
        tag:'‡∏™‡∏†‡∏≤‡∏û‡∏Ñ‡∏•‡πà‡∏≠‡∏á',
        text:'‡∏õ‡∏•‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡πÇ‡∏î‡∏¢‡∏£‡∏ß‡∏°‡πÅ‡∏•‡πâ‡∏ß ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏´‡∏°?',
        options:[
          { key:'none', label:'‡πÑ‡∏°‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏•‡∏¢', icon:'üî¥',
            affect:(k,s)=>{ s.facts.monthEndLeft='none'; },
            next: ()=> Q.debtOrSaveRoute
          },
          { key:'some', label:'‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏ô‡∏¥‡∏î‡∏´‡∏ô‡πà‡∏≠‡∏¢', icon:'üü°',
            affect:(k,s)=>{ s.facts.monthEndLeft='some'; },
            next: ()=> Q.emergencyFund
          },
          { key:'steady', label:'‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠', icon:'üü¢',
            affect:(k,s)=>{ s.facts.monthEndLeft='steady'; },
            next: ()=> Q.investLevel
          }
        ]
      },

      expenseCategory:{
        id:'expenseCategory',
        tag:'‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô',
        text:'‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏™‡πà‡∏ß‡∏ô‡πÉ‡∏´‡∏ç‡πà‡∏´‡∏°‡∏î‡∏Å‡∏±‡∏ö‡∏≠‡∏∞‡πÑ‡∏£?',
        options:[
          { key:'food', label:'‡∏≠‡∏≤‡∏´‡∏≤‡∏£ / ‡πÄ‡∏î‡∏•‡∏¥‡πÄ‡∏ß‡∏≠‡∏£‡∏µ', icon:'üçî',
            affect:(k,s)=>{ s.visited.expense=true; },
            next: ()=> Q.monthEnd
          },
          { key:'shopping', label:'‡∏Ç‡∏≠‡∏á‡πÉ‡∏ä‡πâ / ‡∏Ç‡∏≠‡∏á‡∏≠‡∏¢‡∏≤‡∏Å‡πÑ‡∏î‡πâ', icon:'üõçÔ∏è',
            affect:(k,s)=>{ s.visited.expense=true; },
            next: ()=> Q.monthEnd
          },
          { key:'bills', label:'‡∏Ñ‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á / ‡∏Ñ‡πà‡∏≤‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏π‡∏õ‡πÇ‡∏†‡∏Ñ', icon:'üöù',
            affect:(k,s)=>{ s.visited.expense=true; },
            next: ()=> Q.monthEnd
          }
        ]
      },

      emergencyFund:{
        id:'emergencyFund',
        tag:'‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô',
        text:'‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏°‡∏µ ‚Äú‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô‚Äù ‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏Å‡∏µ‡πà‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô?',
        sub:'‡πÄ‡∏ä‡πà‡∏ô ‡∏Ñ‡πà‡∏≤‡∏£‡∏±‡∏Å‡∏©‡∏≤/‡∏ï‡∏Å‡∏á‡∏≤‡∏ô/‡∏ã‡πà‡∏≠‡∏°‡∏ö‡πâ‡∏≤‡∏ô',
        options:[
          { key:'0', label:'‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏•‡∏¢', icon:'0Ô∏è‚É£',
            affect:(k,s)=>{ s.facts.emergencyMonths='0'; s.visited.saving=true; },
            next: ()=> Q.debtOrInvestRoute
          },
          { key:'lt1', label:'‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ 1 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô', icon:'üå±',
            affect:(k,s)=>{ s.facts.emergencyMonths='<1'; s.visited.saving=true; },
            next: ()=> Q.debtOrInvestRoute
          },
          { key:'1-3', label:'1‚Äì3 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô', icon:'üß∞',
            affect:(k,s)=>{ s.facts.emergencyMonths='1-3'; s.visited.saving=true; },
            next: ()=> Q.debtOrInvestRoute
          },
          { key:'gt3', label:'‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 3 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô', icon:'üõ°Ô∏è',
            affect:(k,s)=>{ s.facts.emergencyMonths='>3'; s.visited.saving=true; },
            next: ()=> Q.investLevel
          }
        ]
      },

      debtOrSaveRoute:{
        id:'debtOrSaveRoute',
        tag:'‡∏ó‡∏≤‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ñ‡∏±‡∏î‡πÑ‡∏õ',
        text:'‡∏ñ‡πâ‡∏≤‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏°‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏•‡∏¢ ‡∏≠‡∏¢‡∏≤‡∏Å‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å‡∏≠‡∏∞‡πÑ‡∏£?',
        options:[
          { key:'reduceExpense', label:'‡∏•‡∏î‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏Å‡πà‡∏≠‡∏ô', icon:'‚úÇÔ∏è',
            affect:(k,s)=>{ s.visited.expense=true; },
            next: ()=> Q.expenseCategory
          },
          { key:'fixDebt', label:'‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏´‡∏ô‡∏µ‡πâ‡∏Å‡πà‡∏≠‡∏ô', icon:'üßØ',
            affect:(k,s)=>{ s.visited.debt=true; },
            next: ()=> Q.debtDTI
          },
          { key:'addIncome', label:'‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ', icon:'‚ûï',
            affect:(k,s)=>{ s.visited.income=true; },
            next: ()=> Q.incomeHow
          }
        ]
      },

      debtDTI:{
        id:'debtDTI',
        tag:'DTI (‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏´‡∏ô‡∏µ‡πâ/‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ)',
        text:'‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏†‡∏≤‡∏£‡∏∞‡∏´‡∏ô‡∏µ‡πâ‡∏ï‡πà‡∏≠‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ (DTI) ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà?',
        sub:'‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏á‡πà‡∏≤‡∏¢ ‡πÜ: ‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏´‡∏ô‡∏µ‡πâ‡∏ï‡πà‡∏≠‡πÄ‡∏î‡∏∑‡∏≠‡∏ô √∑ ‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏ï‡πà‡∏≠‡πÄ‡∏î‡∏∑‡∏≠‡∏ô √ó 100',
        options:[
          { key:'high', label:'‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 50% (‡∏´‡∏ô‡∏±‡∏Å)', icon:'üìõ',
            affect:(k,s)=>{ s.facts.dtiBand='high'; s.visited.debt=true; },
            next: ()=> Q.goalFocus
          },
          { key:'mid', label:'36‚Äì50% (‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏µ‡∏ö‡∏õ‡∏£‡∏±‡∏ö)', icon:'‚ö†Ô∏è',
            affect:(k,s)=>{ s.facts.dtiBand='mid'; s.visited.debt=true; },
            next: ()=> Q.goalFocus
          },
          { key:'ok', label:'‡∏ï‡πà‡∏≥‡∏Å‡∏ß‡πà‡∏≤ 36% (‡∏û‡∏≠‡πÑ‡∏´‡∏ß)', icon:'‚úÖ',
            affect:(k,s)=>{ s.facts.dtiBand='ok'; s.visited.debt=true; },
            next: ()=> Q.goalFocus
          }
        ]
      },

      investLevel:{
        id:'investLevel',
        tag:'‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∏‡∏ô',
        text:'‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∏‡∏ì‡∏•‡∏á‡∏ó‡∏∏‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö‡πÑ‡∏´‡∏ô?',
        options:[
          { key:'none', label:'‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Ñ‡∏¢‡πÄ‡∏£‡∏¥‡πà‡∏°', icon:'üëê',
            affect:(k,s)=>{ s.facts.investLevel='none'; s.visited.invest=true; },
            next: ()=> Q.saveRate
          },
          { key:'some', label:'‡∏•‡∏á‡∏ó‡∏∏‡∏ô‡∏ö‡πâ‡∏≤‡∏á‡πÅ‡∏ï‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠', icon:'üîÅ',
            affect:(k,s)=>{ s.facts.investLevel='some'; s.visited.invest=true; },
            next: ()=> Q.saveRate
          },
          { key:'serious', label:'‡∏•‡∏á‡∏ó‡∏∏‡∏ô‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠‡∏ï‡∏≤‡∏°‡πÅ‡∏ú‡∏ô', icon:'üìä',
            affect:(k,s)=>{ s.facts.investLevel='serious'; s.visited.invest=true; },
            next: ()=> Q.saveRate
          }
        ]
      },

      saveRate:{
        id:'saveRate',
        tag:'‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏≠‡∏≠‡∏°',
        text:'‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏≠‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏ï‡πà‡∏≠‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà?',
        options:[
          { key:'lt10', label:'‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ 10%', icon:'1Ô∏è‚É£',
            affect:(k,s)=>{ s.facts.saveRate='<10'; s.visited.saving=true; },
            next: ()=> Q.goalFocus
          },
          { key:'10-20', label:'10‚Äì20%', icon:'2Ô∏è‚É£',
            affect:(k,s)=>{ s.facts.saveRate='10-20'; s.visited.saving=true; },
            next: ()=> Q.goalFocus
          },
          { key:'gt20', label:'‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 20%', icon:'3Ô∏è‚É£',
            affect:(k,s)=>{ s.facts.saveRate='>20'; s.visited.saving=true; },
            next: ()=> Q.goalFocus
          }
        ]
      },

      portGoal:{
        id:'portGoal',
        tag:'‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏á‡∏¥‡∏ô‡πÇ‡∏ï',
        text:'‡πÅ‡∏ú‡∏ô‡∏£‡∏∞‡∏¢‡∏∞‡∏¢‡∏≤‡∏ß‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?',
        options:[
          { key:'retire', label:'‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÄ‡∏Å‡∏©‡∏µ‡∏¢‡∏ì', icon:'üßì',
            affect:(k,s)=>{ s.facts.growPriority='retire'; },
            next: ()=> Q.saveRate
          },
          { key:'house', label:'‡∏ã‡∏∑‡πâ‡∏≠‡∏ö‡πâ‡∏≤‡∏ô/‡∏°‡∏µ‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡∏ô', icon:'üè†',
            affect:(k,s)=>{ s.facts.growPriority='house'; },
            next: ()=> Q.saveRate
          },
          { key:'family', label:'‡∏î‡∏π‡πÅ‡∏•‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß', icon:'üë®‚Äçüë©‚Äçüëß‚Äçüë¶',
            affect:(k,s)=>{ s.facts.growPriority='family'; },
            next: ()=> Q.saveRate
          },
          { key:'grow', label:'‡πÉ‡∏´‡πâ‡πÄ‡∏á‡∏¥‡∏ô‡πÇ‡∏ï‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á', icon:'üå≥',
            affect:(k,s)=>{ s.facts.growPriority='grow'; },
            next: ()=> Q.saveRate
          }
        ]
      },

      debtOrInvestRoute:{
        id:'debtOrInvestRoute',
        tag:'‡∏ó‡∏≤‡∏á‡πÑ‡∏õ‡∏ï‡πà‡∏≠',
        text:'‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏≠‡∏¢‡∏≤‡∏Å‡πÇ‡∏ü‡∏Å‡∏±‡∏™‡∏≠‡∏∞‡πÑ‡∏£?',
        options:[
          { key:'debt', label:'‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏´‡∏ô‡∏µ‡πâ', icon:'üßØ',
            affect:(k,s)=>{ s.visited.debt=true; },
            next: ()=> Q.debtDTI
          },
          { key:'invest', label:'‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏•‡∏á‡∏ó‡∏∏‡∏ô‡πÅ‡∏ö‡∏ö‡∏á‡πà‡∏≤‡∏¢', icon:'üå±',
            affect:(k,s)=>{ s.visited.invest=true; },
            next: ()=> Q.investLevel
          }
        ]
      },

      goalFocus:{
        id:'goalFocus',
        tag:'‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ 90 ‡∏ß‡∏±‡∏ô',
        text:'‡πÉ‡∏ô 90 ‡∏ß‡∏±‡∏ô‡πÅ‡∏£‡∏Å ‡∏≠‡∏¢‡∏≤‡∏Å‡πÄ‡∏´‡πá‡∏ô‡∏≠‡∏∞‡πÑ‡∏£‡∏ä‡∏±‡∏î‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î?',
        options:[
          { key:'leftover', label:'‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏á‡∏¥‡∏ô‡∏à‡∏£‡∏¥‡∏á‡∏ó‡∏∏‡∏Å‡πÄ‡∏î‡∏∑‡∏≠‡∏ô', icon:'üí°',
            affect:(k,s)=>{},
            next: ()=> Q.goalSpeed
          },
          { key:'emg', label:'‡∏°‡∏µ‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô', icon:'üõü',
            affect:(k,s)=>{ s.visited.saving=true; },
            next: ()=> Q.goalSpeed
          },
          { key:'debt', label:'‡∏†‡∏≤‡∏£‡∏∞‡∏´‡∏ô‡∏µ‡πâ‡πÄ‡∏ö‡∏≤‡∏•‡∏á (DTI ‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô)', icon:'üßæ',
            affect:(k,s)=>{ s.visited.debt=true; },
            next: ()=> Q.goalSpeed
          },
          { key:'invest', label:'‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏•‡∏á‡∏ó‡∏∏‡∏ô/‡∏õ‡∏£‡∏±‡∏ö‡∏û‡∏≠‡∏£‡πå‡∏ï‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏°‡∏≤‡∏∞', icon:'üìà',
            affect:(k,s)=>{ s.visited.invest=true; },
            next: ()=> Q.goalSpeed
          }
        ]
      },

      goalSpeed:{
        id:'goalSpeed',
        tag:'‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°',
        text:'‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏•‡∏∏‡∏¢‡πÉ‡∏´‡πâ‡πÄ‡∏´‡πá‡∏ô‡∏ú‡∏•‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏´‡∏£‡πà?',
        options:[
          { key:'now', label:'‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏•‡∏¢', icon:'‚úÖ',
            affect:(k,s)=>{},
            next: ()=> null
          },
          { key:'next', label:'‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤', icon:'üìÖ',
            affect:(k,s)=>{},
            next: ()=> null
          },
          { key:'slow', label:'‡∏Ñ‡πà‡∏≠‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≠‡∏¢‡πÑ‡∏õ', icon:'üß≠',
            affect:(k,s)=>{},
            next: ()=> null
          }
        ]
      }
    };

    // ‡∏ï‡∏±‡∏ß‡∏ä‡πà‡∏ß‡∏¢‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ó‡∏≤‡∏á‡∏´‡∏•‡∏±‡∏á emergencyFund
    Q.debtOrInvestRoute.next = undefined; // handled via engine
    function afterEmergencyRoute(state){
      if(state.facts.emergencyMonths==='>3') return Q.investLevel;
      // ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏±‡∏ô‡∏ä‡∏ô ‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏õ‡∏ï‡πà‡∏≠‡∏ó‡∏µ‡πà‡∏´‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡∏•‡∏á‡∏ó‡∏∏‡∏ô‡∏á‡πà‡∏≤‡∏¢
      return Q.debtOrInvestRoute;
    }
    // ‡πÅ‡∏ó‡∏ô‡∏î‡πâ‡∏ß‡∏¢ reference ‡πÉ‡∏ô nodes
    Q.emergencyFund.options.forEach(o=>{
      o.next = (s)=> afterEmergencyRoute(s);
    });

    // ‡∏õ‡∏∏‡πà‡∏°‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö
    btnBack.addEventListener('click', ()=>{
      if(state.path.length===0){ return; }
      // ‡∏•‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
      const lastId = state.path.pop();
      delete state.answers[lastId];
      // ‡∏ñ‡∏≠‡∏¢ step
      state.step = Math.max(0, state.step-1);
      // ‡∏´‡∏≤‡πÇ‡∏´‡∏ô‡∏î‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
      const prevId = state.path[state.path.length-1] || 'welcome';
      const prevNode = (prevId==='welcome') ? Q.welcome : findNodeById(prevId);
      // ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÅ‡∏™‡∏î‡∏á‡πÇ‡∏´‡∏ô‡∏î‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á (step++ ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô renderQuestion)
      state.step = Math.max(0, state.step-1);
      renderQuestion(prevNode);
    });

    btnReset.addEventListener('click', resetGame);

    function findNodeById(id){
      for(const key in Q){
        if(Q[key] && Q[key].id === id) return Q[key];
      }
      // fallback
      return Q.welcome;
    }

    function resetGame(){
      state.step = 0;
      state.path = [];
      state.answers = {};
      state.visited = { income:false, expense:false, debt:false, saving:false, invest:false };
      state.facts = { feeling:null, causeTight:null, expenseFocus:null, debtStatus:null, dtiBand:null, monthEndLeft:null, emergencyMonths:null, investLevel:null, saveRate:null, growPriority:null };
      btnBack.disabled = true;
      renderQuestion(Q.welcome);
    }

    // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°
    resetGame();
  </script>
</body>
</html>
